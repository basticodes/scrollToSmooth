/*!
* ScrollToSmooth
* Author: Bastian FieÃŸinger
* Version: 2.2.1
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).scrollToSmooth=e()}(this,(function(){"use strict";const t=t=>t,e=document,n=e.documentElement,i=e.body,o=window,s=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,r=o.cancelAnimationFrame||o.mozCancelAnimationFrame,a=(t,n=e)=>n.querySelector(t),l=(t,n=e)=>{let i=!1;return("string"==typeof t&&a(t,n)||c(t)&&n.contains(t))&&(i=!0),i},c=t=>(t=>{try{return t instanceof Node}catch(e){return"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName&&"object"==typeof t.ownerDocument}})(t)||(t=>{try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}})(t),h=()=>o.pageYOffset||i.scrollTop||n.scrollTop,p=()=>o.performance&&"now"in o.performance?performance.now():(new Date).getTime(),g=t=>{const n=new RegExp("("+location.hash+")?$");return(t.baseURI||e.URL).replace(n,"")},u=()=>Math.max(i.scrollHeight,i.offsetHeight,i.clientHeight,n.scrollHeight,n.offsetHeight,n.clientHeight),f=()=>o.innerHeight||n.clientHeight||i.clientHeight;let d;class m{constructor(o,s){this.__id=0,this.__id=++m.id;const r={container:e,targetAttribute:"href",topOnEmptyHash:!0,offset:null,duration:400,durationRelative:!1,durationMin:null,durationMax:null,easing:t,onScrollStart:null,onScrollUpdate:null,onScrollEnd:null};s=s||r;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&!Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=r[t]);this.settings=s;let h=i;"string"==typeof this.settings.container&&l(this.settings.container)?h=a(this.settings.container):"string"!=typeof this.settings.container&&c(this.settings.container)&&l(this.settings.container)&&(h=this.settings.container),h=h===e||h===n?i:h,this.container=h,this.elements="string"==typeof o?((t,n=e)=>n.querySelectorAll(t))(o,this.container):o}getTargetElement(t){let e="";return"href"===this.settings.targetAttribute&&t.href?e=t.href.replace(g(t),""):t.getAttribute(this.settings.targetAttribute)&&(e=t.getAttribute(this.settings.targetAttribute)),this.settings.topOnEmptyHash&&"#"==e?this.container:l(e,this.container)?a(e,this.container):null}linkCollector(){const t=[];return Array.prototype.forEach.call(this.elements,e=>{this.getTargetElement(e)&&("href"===this.settings.targetAttribute&&-1!=e.href.indexOf(g(e))&&-1!=e.href.indexOf("#")&&(""!=e.hash||this.settings.topOnEmptyHash)||"href"!=this.settings.targetAttribute)&&t.push(e)}),t}clickHandler(t,e){e.stopPropagation(),e.preventDefault();const n=this.getTargetElement(t);n&&this.scrollTo(n)}evalTimeFn(t,e){return Function('"use strict"; return ('+t+"("+Array.prototype.join.call(e,",")+"))")()}getDuration(t,e){let n=Math.max(1,e.duration);if(e.durationRelative){const i="number"==typeof e.durationRelative?e.durationRelative:1e3;n=Math.max(e.duration,t*(n/i))}return e.durationMin&&n<e.durationMin&&(n=e.durationMin),e.durationMax&&n>e.durationMax&&(n=e.durationMax),n}expandDocument(t,e,n){const i=this.scrollExceedsDocument(t,e,n),o=this.getDocumentExpanders(),s=o.filter(t=>"top"===t.getAttribute("data-scrolltosmooth-expand"))[0],r=o.filter(t=>"bottom"===t.getAttribute("data-scrolltosmooth-expand"))[0];i&&s&&"top"===i.to?s.style.height=i.px+"px":i&&r&&"bottom"===i.to?r.style.height=i.px+"px":o.forEach(t=>{t.style.removeProperty("height")})}getDocumentExpanders(){return Array.prototype.slice.call(this.container.children).filter(t=>t.hasAttribute("data-scrolltosmooth-expand"))}animateScroll(t,e,n,i,r){const a=t-e,l=a<0?-1*a:a,c=this.getDuration(l,this.settings),h=Math.min(c,p()-n),g=h/c,m="string"==typeof this.settings.easing?this.evalTimeFn(this.settings.easing,[g]):this.settings.easing(g),y=e+a*m;this.settings.onScrollUpdate&&"function"==typeof this.settings.onScrollUpdate&&this.settings.onScrollUpdate({startPosition:e,currentPosition:y,endPosition:t}),o.scroll(0,y),i||(i=u()),r||(r=f()),this.expandDocument(y,i,r),h>=c?this.settings.onScrollEnd&&"function"==typeof this.settings.onScrollEnd&&this.settings.onScrollEnd({startPosition:e,endPosition:t}):d=s(()=>{this.animateScroll(t,e,n,i,r)})}scrollExceedsDocument(t,e,n){const i=e-n;return t<0?{to:"top",px:-1*t}:t>i&&{to:"bottom",px:-1*(i-t)}}init(){this.destroy();const t=e.createElement("div");t.setAttribute("data-scrolltosmooth-expand","top"),this.container.insertBefore(t,this.container.firstChild);const n=e.createElement("div");n.setAttribute("data-scrolltosmooth-expand","bottom"),this.container.appendChild(n),Array.prototype.forEach.call(this.linkCollector(),t=>{t.addEventListener("click",this.clickHandler.bind(this,t),!1)});["mousewheel","wheel","touchmove"].forEach(t=>{o.addEventListener(t,()=>{this.cancelScroll()})})}destroy(){this.settings&&(this.cancelScroll(),this.getDocumentExpanders().forEach(t=>{t.parentNode.removeChild(t)}),Array.prototype.forEach.call(this.linkCollector(),t=>{t.removeEventListener("click",this.clickHandler.bind(this,t),!1)}))}scrollTo(t){const e=h(),n=u(),i=f();let o=0;if(l(t,this.container)){"string"==typeof t&&(t=a(t,this.container));const s=t.getBoundingClientRect().top+e;o=n-s<i?n-i:s}else isNaN(t)||("string"==typeof t&&(t=parseFloat(t)),o=t=n-t<i?n-i:t);if(null!==this.settings.offset){let t=0;if(l(this.settings.offset,this.container)){let e=this.settings.offset;"string"==typeof e&&(e=a(this.settings.offset)),c(e)&&(t=e.getBoundingClientRect().height)}else isNaN(this.settings.offset)||(t=this.settings.offset,"string"==typeof t&&(t=parseFloat(t)));o-=t}o=o<0?0:o,this.settings.onScrollStart&&"function"==typeof this.settings.onScrollStart&&this.settings.onScrollStart({startPosition:e,endPosition:o}),this.animateScroll(o,e,p(),n,i)}scrollBy(t){this.scrollTo(h()+t)}cancelScroll(){d&&r(d)}update(t){if(t instanceof Object)for(const[e,n]of Object.entries(t))this.settings[e]=n}}return m.id=0,m}));
