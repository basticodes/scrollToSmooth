/*!
* ScrollToSmooth
* Author: Bastian FieÃŸinger
* Version: 2.2.1
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).scrollToSmooth=e()}(this,(function(){"use strict";const t=t=>t,e=document,n=e.documentElement,i=e.body,s=window,o=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame||s.msRequestAnimationFrame,r=s.cancelAnimationFrame||s.mozCancelAnimationFrame,a=(t,n=e)=>n.querySelector(t),l=(t,n=e)=>{let i=!1;return("string"==typeof t&&a(t,n)||c(t)&&n.contains(t))&&(i=!0),i},c=t=>(t=>{try{return t instanceof Node}catch(e){return"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName&&"object"==typeof t.ownerDocument}})(t)||(t=>{try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}})(t),h=()=>s.pageYOffset||i.scrollTop||n.scrollTop,g=()=>s.performance&&"now"in s.performance?performance.now():(new Date).getTime(),f=t=>{const n=new RegExp("("+location.hash+")?$");return(t.baseURI||e.URL).replace(n,"")},p=()=>Math.max(i.scrollHeight,i.offsetHeight,i.clientHeight,n.scrollHeight,n.offsetHeight,n.clientHeight),u=()=>s.innerHeight||n.clientHeight||i.clientHeight;let d;class m{constructor(s,o){this.__id=0,this.__id=++m.id;const r={container:e,targetAttribute:"href",topOnEmptyHash:!0,offset:null,duration:400,durationRelative:!1,durationMin:null,durationMax:null,easing:t,onScrollStart:null,onScrollUpdate:null,onScrollEnd:null};o=o||r;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&!Object.prototype.hasOwnProperty.call(o,t)&&(o[t]=r[t]);this.settings=o;let h=i;"string"==typeof this.settings.container&&l(this.settings.container)?h=a(this.settings.container):"string"!=typeof this.settings.container&&c(this.settings.container)&&l(this.settings.container)&&(h=this.settings.container),h=h===e||h===n?i:h,this.container=h,this.elements="string"==typeof s?((t,n=e)=>n.querySelectorAll(t))(s,this.container):s}getTargetElement(t){let e="";return"href"===this.settings.targetAttribute&&t.href?e=t.href.replace(f(t),""):t.getAttribute(this.settings.targetAttribute)&&(e=t.getAttribute(this.settings.targetAttribute)),this.settings.topOnEmptyHash&&"#"==e?this.container:l(e,this.container)?a(e,this.container):null}linkCollector(){const t=[];return Array.prototype.forEach.call(this.elements,e=>{this.getTargetElement(e)&&("href"===this.settings.targetAttribute&&-1!=e.href.indexOf(f(e))&&-1!=e.href.indexOf("#")&&(""!=e.hash||this.settings.topOnEmptyHash)||"href"!=this.settings.targetAttribute)&&t.push(e)}),t}clickHandler(t,e){e.stopPropagation(),e.preventDefault();const n=this.getTargetElement(t);n&&this.scrollTo(n)}evalTimeFn(t,e){return Function('"use strict"; return ('+t+"("+e+"))")()}getDuration(t){let e=Math.max(1,this.settings.duration);if(this.settings.durationRelative){const n="number"==typeof this.settings.durationRelative?this.settings.durationRelative:1e3;e=Math.max(this.settings.duration,t*(e/n))}return this.settings.durationMin&&e<this.settings.durationMin&&(e=this.settings.durationMin),this.settings.durationMax&&e>this.settings.durationMax&&(e=this.settings.durationMax),e}scrollExceedsDocument(t,e,n){const i=e-n;return t<0?{to:"top",px:-1*t}:t>i&&{to:"bottom",px:-1*(i-t)}}expandDocument(t,e,n){const i=this.scrollExceedsDocument(t,e,n),s=this.getDocumentExpanders(),o=s.filter(t=>"top"===t.getAttribute("data-scrolltosmooth-expand"))[0],r=s.filter(t=>"bottom"===t.getAttribute("data-scrolltosmooth-expand"))[0];i&&o&&"top"===i.to?o.style.height=i.px+"px":i&&r&&"bottom"===i.to?r.style.height=i.px+"px":s.forEach(t=>{t.style.removeProperty("height")})}getDocumentExpanders(){return Array.prototype.slice.call(this.container.children).filter(t=>t.hasAttribute("data-scrolltosmooth-expand"))}animateScroll(t,e,n,i,r){const a=t-e,l=a<0?-1*a:a,c=this.getDuration(l),h=Math.min(c,g()-n),f=h/c,m="string"==typeof this.settings.easing?this.evalTimeFn(this.settings.easing,f):this.settings.easing(f),y=e+a*m;this.settings.onScrollUpdate&&"function"==typeof this.settings.onScrollUpdate&&this.settings.onScrollUpdate({startPosition:e,currentPosition:y,endPosition:t}),s.scroll(0,y),i||(i=p()),r||(r=u()),this.expandDocument(y,i,r),h>=c?this.settings.onScrollEnd&&"function"==typeof this.settings.onScrollEnd&&this.settings.onScrollEnd({startPosition:e,endPosition:t}):d=o(()=>{this.animateScroll(t,e,n,i,r)})}init(){this.destroy();const t=e.createElement("div");t.setAttribute("data-scrolltosmooth-expand","top"),this.container.insertBefore(t,this.container.firstChild);const n=e.createElement("div");n.setAttribute("data-scrolltosmooth-expand","bottom"),this.container.appendChild(n),Array.prototype.forEach.call(this.linkCollector(),t=>{t.addEventListener("click",this.clickHandler.bind(this,t),!1)});["mousewheel","wheel","touchmove"].forEach(t=>{s.addEventListener(t,()=>{this.cancelScroll()})})}destroy(){this.settings&&(this.cancelScroll(),this.getDocumentExpanders().forEach(t=>{t.parentNode.removeChild(t)}),Array.prototype.forEach.call(this.linkCollector(),t=>{t.removeEventListener("click",this.clickHandler.bind(this,t),!1)}))}scrollTo(t){const n=h(),i=p(),s=u();let o=0;if(isNaN(t)){if(("object"==typeof t||"string"==typeof t)&&l(t,this.container)){"string"==typeof t&&(t=a(t,this.container)),t.focus(),e.activeElement!==t&&t.setAttribute("tabindex","-1");const r=t.getBoundingClientRect().top+n;o=i-r<s?i-s:r}}else"string"==typeof t&&(t=parseFloat(t)),o=t=i-t<s?i-s:t;if(null!==this.settings.offset){let t=0;if(l(this.settings.offset,this.container)){let e=this.settings.offset;"string"==typeof e&&(e=a(this.settings.offset)),c(e)&&(t=e.getBoundingClientRect().height)}else isNaN(this.settings.offset)||(t=this.settings.offset,"string"==typeof t&&(t=parseFloat(t)));o-=t}o=o<0?0:o,this.settings.onScrollStart&&"function"==typeof this.settings.onScrollStart&&this.settings.onScrollStart({startPosition:n,endPosition:o}),this.animateScroll(o,n,g(),i,s)}scrollBy(t){this.scrollTo(h()+t)}cancelScroll(){d&&r(d)}update(t){if(t instanceof Object)for(const[e,n]of Object.entries(t))this.settings[e]=n}}return m.id=0,m}));
